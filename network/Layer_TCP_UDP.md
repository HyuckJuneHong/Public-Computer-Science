> <목차>  
> 1. OSI 7계층  
> 2. TCP/IP 4계층  
> 3. TCP  
> 4. UDP  
> 5. 정리

---

## OSI 7 계층

| **계층** |  | **설명** |
| --- | --- | --- |
| 7 | Application(응용) | 최종 목적지로 응용 프로그램과 연관하여 서비스를 수행하는 계층   (ex : HTTP, FTP, DNS) |
| 6 | Presentation(표현) | 데이터 압축, 변환이 이뤄지는 계층   (ex : JPEG, MPEG) |
| 5 | Session(세션) | 데이터가 통신하기 위한 논리적 연결을 담당하는 계층   (ex : API, Socket) |
| 4 | Transport(전송) | 종단 간의 사용자들에게 신뢰성 있는 데이터를 전달하는 계층   (흐름 제어 : 송신측과 수신측 사이의 데이터 처리 속도 차이를 제어)   (혼잡 제어 : 네트워크 혼잡을 피하기 위해 데이터의 전송 속도 제어)   (오류 제어 : 오류 검출과 재전송) |
| 3 | Network(네트워크) | IP를 지정하고 라우터로 경로를 선택해 네트워크를 통해 패킷을 전달하는 계층 |
| 2 | Data Link(데이터링크) | 신뢰성 있는 전송을 보장하기 위한 계층   (오류 제어, 흐름 제어, 회선 제어) |
| 1 | Physical(물리) | 전기적, 물리적 세부 사항을 정의하는 계층 |

## TCP/IP 4계층

| **계층** |  | **설명** |
| --- | --- | --- |
| 4 | Application(응용) | OSI 7계층의 세션 계층과  표현 계층, 응용 계층   사용자 인터페이스 구현. 즉, 통신 서비스 실현 계층   서버와 클라이언트 개념   (프로토콜 : FTP, HTTP, SSH) |
| 3 | Transport(전송) | OSI 7계층의 전송 계층   신뢰성 있는 전송 기능 제공   (프로토콜 : TCP, UDP) |
| 2 | Internet(인터넷) | OSI 7계층의 네트워크 계층   노드 간의 패킷 전송 기능과 라우팅 기능을 담당   주로 IP(Internet Protocol)을 사용하고 보조해주는 ICMP가 있다.   (프로토콜 : IP, ARP, RARP) |
| 1 | Network(네트워크) | OSI 7계층의 물리 계층과 데이터링크 계층 역할   물리적 연결을 지원   즉, 물리적으로 데이터가 네트워크를 통해 어떻게 전송되는 지 정의   (물리적 주소로 MAC 사용)   (MAC : 기기 별로 갖고 잇는 물리적 주소) |

---

## TCP

-   연결형 서비스를 지원하는 프로토콜
-   흐름 제어, 혼잡 제어, 오류 제어를 통해 신뢰성 보장
    -   오류 제어 : 프레임 손상 및 손실일 때 재전송을 통해 복구하는 기법
    -   흐름 제어 : 송신, 수신 사이의 데이터 처리 속도 차이를 제어하기 위한 기법
    -   혼잡 제어 : 네트워크 혼잡을 피하기 위해 데이터 전송 속도를 제어하기 위한 기법
-   초기화(3 Way-Hand Shaking)와 종료(4 Way-Hand Shaking) 과정이 필요하다.
-   때문에 UDP에 비해 속도는 느리지만 신뢰성은 보장한다.
-   전송이 양방향으로 가능한 전이중 방식이다.
-   각 연결이 정확히 2개의 종단점을 가지는 점대점 방식

> **<참고 : 흐름 제어>**  
> 흐름 제어는 송신측의 데이터 처리 속도를 조절해 수신자의 버퍼 오버 플로우를 방지  
> 흐름 제어는 슬라이딩 윈도우를 사용한다.

#### 3 Way Hand Shaking 과정

1.  Client -> Server로 연결하겠다는 SYN 패킷 전송
2.  Server -> Client로 잘 연결했다는 ACK 패킷과 자신도 연결한다는 SYN 패킷 전송
3.  Client -> Server로 잘 연결했다는 SYN 패킷 전송

> **<참고 : SYN>**  
> 이때 랜덤한 수를 SYN로 전송한다.  
> 그 이유는 커넥션을 맺을 때 사용하는 포트는 시간이 지남에 따라 재사용한다. 즉, 순차적 숫자를 전송을 하게 되면 이전의 커넥션으로부터 오는 패킷으로 인식할 가능성이 생기기 때문에 난수 숫자로 전송한다.

#### 4 Way Hand Shaking 과정

1.  Client -> Server로 연결 종료한다는 FIN 패킷 전송
2.  Server -> Client에게 우선적으로 ACK 패킷 전송
3.  Server -> Client에게 자신의 통신이 끝나면 FIN 패킷 전송
4.  Client -> Server로 잘 받았다는 ACK 패킷 전송.  
    이때 클라이언트는 일정 시간(Time Wait) 동안 기다리다가 연결 종료

> **<참고 : TCP 연결 과정과 종료 과정이 차이가 나는 이유>**  
> Client가 데이터 전송을 마쳤다고 해도 Server는 아직 보낼 데이터가 남아있을 수 있어서 ACK 먼저 전송 후 이후에 FIN을 보내기 때문이다.

---

## UDP

-   비연결형 서비스를 지원하는 프로토콜
-   Checksum 필드를 통해 최소한의 오류만 검출한다.
-   TCP에 비해 신뢰성이 낮지만 속도는 더 빠르다. (스트리밍 서비스에 이용)
-   전송을 위한 논리적인 경로가 없고 전송 순서를 보장하지 않는다.
-   수신 여부를 따로 확인하지 않는다.

> **<참고>**  
> TCP와 UDP는 각 별도의 포르 주소 공간을 관리하므로 같은 포트 번호를 사용해도 무방.

---